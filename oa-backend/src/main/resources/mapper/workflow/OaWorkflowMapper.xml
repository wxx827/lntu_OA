<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oa.module.workflow.mapper.OaWorkflowMapper">
    
    <!-- Result Map for OaWorkflow -->
    <resultMap id="BaseResultMap" type="com.oa.module.workflow.entity.OaWorkflow">
        <id column="FLOW_ID" property="flowId"/>
        <result column="FLOW_TYPE" property="flowType"/>
        <result column="TITLE" property="title"/>
        <result column="INITIATOR_ID" property="initiatorId"/>
        <result column="CURRENT_APPROVER_ID" property="currentApproverId"/>
        <result column="STATUS" property="status"/>
        <result column="PRIORITY" property="priority"/>
        <result column="CREATE_TIME" property="createTime"/>
        <result column="UPDATE_TIME" property="updateTime"/>
        <result column="FLOW_DATA" property="flowData"/>
    </resultMap>
    
    <select id="countPendingTasksByUser" resultType="java.lang.Integer">
        SELECT COUNT(*) FROM OA_WORKFLOW 
        WHERE CURRENT_APPROVER_ID = #{userId} 
        AND STATUS = 'PENDING'
    </select>
    
</mapper>
